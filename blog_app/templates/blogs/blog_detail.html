{% extends './../base.html' %}

{% block content %}
    <h1>{{ blog.title }}</h1>
    <!-- Use safe filter to render rich text content -->
    <div>{{ blog.content | safe }}</div>
    <img src="{{ blog.image.url }}" alt="{{ blog.title }}">
    <p>Author: {{ blog.author }}</p>
    <p>Created At: {{ blog.created_at }}</p>
    <p>Updated At: {{ blog.updated_at }}</p>
    
    {% if request.user == blog.author %}
        <a href="{% url 'blogs:blog-update' blog.slug %}">Edit</a>
        <a href="{% url 'blogs:blog-delete' blog.slug %}">Delete</a>
    {% endif %}
    
    <form action="{% url 'blogs:comment-create' blog.slug %}" method="post">
        {% csrf_token %}
        <textarea name="content"></textarea>
        <button type="submit">Add Comment</button>
    </form>
    <form action="{% url 'blogs:rating-create' blog.slug %}" method="post">
        {% csrf_token %}
        <input type="number" name="rating" min="1" max="5">
        <button type="submit">Rate</button>
    </form>
{% endblock content %}
